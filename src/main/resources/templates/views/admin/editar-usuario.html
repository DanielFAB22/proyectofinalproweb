<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>EDITAR USUARIO - SOLUCIONES MUSICALES</title>

    <link th:href="@{/assets/css/styles.css}" rel="stylesheet" type="text/css">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
          rel="stylesheet" crossorigin="anonymous">
</head>

<body>

<div class="container admin-container mt-4">

    <div class="row">
        <div class="col-12">
            <h1>Panel de Administración</h1>

            <h2 class="mb-4">
                Editar Usuario:
                <span th:text="${usuario.username}"></span>
            </h2>

            <!-- ALERTA ERROR -->
            <div class="alert alert-danger alert-dismissible fade show"
                 th:if="${error}">
                <strong>¡Error al guardar!</strong>
                <span th:text="${error}"></span>
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>

            <a th:href="@{/paneladmin#user-list}" class="btn btn-secondary mb-4">
                &larr; Volver al Listado de Usuarios
            </a>
        </div>
    </div>


    <div class="row">
        <div class="col-md-6">

            <!-- FORMULARIO THYMELEAF -->
            <form th:action="@{/paneladmin/usuarios/guardar}"
                  th:object="${usuario}"
                  method="post">

                <!-- CSRF -->
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

                <!-- CAMPOS OCULTOS -->
                <input type="hidden" th:field="*{id}">
                <input type="hidden" th:field="*{password}">
                <input type="hidden" th:field="*{roles}">

                <div class="mb-3">
                    <label class="form-label">Username:</label>
                    <input class="form-control" th:field="*{username}" readonly>
                </div>

                <div class="mb-3">
                    <label class="form-label">Email:</label>
                    <input class="form-control" th:field="*{email}" type="email" required>
                </div>

                <div class="mb-3">
                    <label class="form-label">Roles Asignados:</label>
                    <div>
                        <span class="badge text-bg-primary"
                              th:each="rol : ${usuario.roles}"
                              th:text="${rol.nombre}">
                        </span>
                    </div>
                    <small class="form-text text-muted">
                        La gestión de roles es avanzada y no está disponible en este formulario.
                    </small>
                </div>

                <div class="alert alert-info mt-4">
                    <strong>Advertencia:</strong>
                    Este formulario no permite cambiar la contraseña.
                    Solo el <strong>Email</strong> es editable.
                </div>

                <button type="submit" class="btn btn-success mt-3">
                    Guardar Cambios
                </button>

            </form>
        </div>
    </div>

</div>


<footer class="bg-dark text-light mt-5 p-4">
    <div class="container">
        <div class="row">

            <div class="col-md-4">
                <h5>SOLUCIONES MUSICALES</h5>
                <p>Tu tienda de confianza en guitarras y bajos.</p>
            </div>

            <div class="col-md-4">
                <h5>Contacto</h5>
                <ul class="list-unstyled">
                    <li>+57 300 123 4567</li>
                    <li>contacto@solucionesmusicales.com</li>
                    <li>Neiva, Huila, Colombia</li>
                </ul>
            </div>

            <div class="col-md-4">
                <h5>Enlaces</h5>
                <ul class="list-unstyled">
                    <li><a th:href="@{/somos}" class="text-light text-decoration-none">Quiénes somos</a></li>
                    <li><a href="#" class="text-light text-decoration-none">Guitarras</a></li>
                    <li><a href="#" class="text-light text-decoration-none">Bajos</a></li>
                    <li><a href="#" class="text-light text-decoration-none">Contacto</a></li>
                </ul>
            </div>

        </div>

        <hr class="border-light">
        <p class="text-center mb-0">&copy; 2025 Soluciones Musicales - Todos los derechos reservados</p>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
        crossorigin="anonymous"></script>

</body>
</html>
