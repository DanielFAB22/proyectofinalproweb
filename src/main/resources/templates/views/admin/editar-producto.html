<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>EDITAR PRODUCTO - SOLUCIONES MUSICALES</title>

    <link th:href="@{/assets/css/styles.css}" rel="stylesheet" type="text/css">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
          rel="stylesheet" crossorigin="anonymous">
</head>

<body>

<div class="container admin-container mt-4">
    <div class="row">
        <div class="col-12">
            <h1>Panel de Administración</h1>

            <h2 class="mb-4">
                Editar Producto:
                <span th:text="${producto.nombre}"></span>
                (ID: <span th:text="${producto.id}"></span>)
            </h2>

            <!-- ERROR -->
            <div class="alert alert-danger alert-dismissible fade show"
                 th:if="${error}">
                <strong>¡Error al guardar!</strong>
                <span th:text="${error}"></span>
                <button class="btn-close" data-bs-dismiss="alert"></button>
            </div>

            <a th:href="@{/paneladmin#product-list}" class="btn btn-secondary mb-4">
                &larr; Volver al Listado de Productos
            </a>
        </div>
    </div>


    <div class="row">
        <div class="col-md-8">

            <form th:action="@{/paneladmin/productos/guardar}"
                  th:object="${producto}"
                  method="post">

                <!-- CSRF -->
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

                <!-- ID -->
                <input type="hidden" th:field="*{id}" />

                <div class="mb-3">
                    <label class="form-label">Nombre del Producto:</label>
                    <input class="form-control" th:field="*{nombre}" required>
                </div>

                <div class="mb-3">
                    <label class="form-label">Descripción:</label>
                    <textarea class="form-control" rows="5" th:field="*{descripcion}" required></textarea>
                </div>

                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label class="form-label">Precio (COP):</label>
                        <input class="form-control" th:field="*{precio}" type="number" min="0" required>
                    </div>

                    <div class="col-md-6 mb-3">
                        <label class="form-label">Stock / Cantidad:</label>
                        <input class="form-control" th:field="*{stock}" type="number" min="0" required>
                    </div>
                </div>

                <div class="row">

                    <div class="col-md-6 mb-3">
                        <label class="form-label">Tipo de Producto:</label>
                        <select class="form-select" th:field="*{tipoProducto}" required>
                            <option value="">-- Seleccione un tipo --</option>
                            <option value="Guitarra">Guitarra</option>
                            <option value="Bajo">Bajo</option>
                        </select>
                    </div>

                    <div class="col-md-6 mb-3">
                        <label class="form-label">Marca:</label>
                        <input class="form-control" th:field="*{marca}" required>
                    </div>

                </div>

                <div class="mb-3">
                    <label class="form-label">URL de la Imagen (Ruta relativa):</label>
                    <input class="form-control" th:field="*{imagenUrl}" placeholder="Ej: guitarras/marca/modelo.png">

                    <small class="form-text text-muted mt-2 d-block"
                           th:if="${producto.imagenUrl}">
                        Ruta de imagen actual:
                        <span th:text="${producto.imagenUrl}"></span>
                    </small>
                </div>

                <div class="mb-3 form-check mt-4">
                    <input type="checkbox" class="form-check-input" th:field="*{destacado}" id="destacado">
                    <label class="form-check-label" for="destacado">
                        Marcar como <strong>Producto Destacado</strong> en la página principal.
                    </label>
                </div>

                <button type="submit" class="btn btn-lg btn-success mt-4">
                    Guardar Cambios del Producto
                </button>

            </form>

        </div>
    </div>

</div>


<footer class="bg-dark text-light mt-5 p-4">
    <div class="container">
        <div class="row">

            <div class="col-md-4">
                <h5>SOLUCIONES MUSICALES</h5>
                <p>Tu tienda de confianza en guitarras y bajos.</p>
            </div>

            <div class="col-md-4">
                <h5>Contacto</h5>
                <ul class="list-unstyled">
                    <li>+57 300 123 4567</li>
                    <li>contacto@solucionesmusicales.com</li>
                    <li>Neiva, Huila, Colombia</li>
                </ul>
            </div>

            <div class="col-md-4">
                <h5>Enlaces</h5>
                <ul class="list-unstyled">
                    <li><a th:href="@{/somos}" class="text-light text-decoration-none">Quiénes somos</a></li>
                    <li><a href="#" class="text-light text-decoration-none">Guitarras</a></li>
                    <li><a href="#" class="text-light text-decoration-none">Bajos</a></li>
                    <li><a href="#" class="text-light text-decoration-none">Contacto</a></li>
                </ul>
            </div>

        </div>

        <hr class="border-light">
        <p class="text-center mb-0">&copy; 2025 Soluciones Musicales - Todos los derechos reservados</p>

    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
        crossorigin="anonymous"></script>

</body>
</html>
