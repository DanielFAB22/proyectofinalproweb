<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>SCHECTER GUITARRAS</title>

    <link th:href="@{/assets/css/styles.css}" rel="stylesheet"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>

<header>

    <a th:href="@{/}">
        <img th:src="@{/assets/img/logo.png}" alt="logo soluciones musicales" class="logo">
    </a>

    <div class="iconos">

        <!-- ICONO CARRITO -->
        <a th:href="@{/carrito}">
            <img th:src="@{/assets/img/carrito.png}" alt="logo carrito" class="logo">
        </a>

        <!-- ADMIN -->
        <a th:if="${#authorization.expression('hasRole(''ROLE_ADMIN'')')}"
           th:href="@{/paneladmin}">
            <img th:src="@{/assets/img/user.png}" alt="logo user" class="logo">
        </a>

        <!-- USUARIO LOGUEADO NORMAL -->
        <a th:if="${#authorization.expression('isAuthenticated()')
               and !#authorization.expression('hasRole(''ROLE_ADMIN'')')}"
           th:href="@{/inicio}">
            <img th:src="@{/assets/img/user.png}" alt="logo user" class="logo">
        </a>

        <!-- USUARIO INVITADO (ANÓNIMO) -->
        <a sec:authorize="isAnonymous()" th:href="@{/inicio}">
            <img th:src="@{/assets/img/user.png}" alt="logo user" class="logo">
        </a>

    </div>

    <div class="somos">
        <a th:href="@{/somos}"><h5>Quiénes somos?</h5></a>
    </div>
</header>

<nav class="menu">
    <div class="btn-group">
        <button class="btn btn-secondary btn-lg dropdown-toggle" type="button" data-bs-toggle="dropdown">
            GUITARRAS ELÉCTRICAS
        </button>
        <ul class="dropdown-menu">
            <li><a class="dropdown-item" th:href="@{/catalogos/guitarras/fender}">FENDER</a></li>
            <li><a class="dropdown-item" th:href="@{/catalogos/guitarras/gibson}">GIBSON</a></li>
            <li><a class="dropdown-item" th:href="@{/catalogos/guitarras/schecter}">SCHECTER</a></li>
        </ul>
    </div>

    <div class="btn-group">
        <button class="btn btn-secondary btn-lg dropdown-toggle" type="button" data-bs-toggle="dropdown">
            BAJOS ELÉCTRICOS
        </button>
        <ul class="dropdown-menu">
            <li><a class="dropdown-item" th:href="@{/catalogos/bajos/fender}">FENDER</a></li>
            <li><a class="dropdown-item" th:href="@{/catalogos/bajos/ibanez}">IBANEZ</a></li>
            <li><a class="dropdown-item" th:href="@{/catalogos/bajos/schecter}">SCHECTER</a></li>
        </ul>
    </div>
</nav>

<div class="container text-center">
    <img th:src="@{/assets/img/catalogos/guitarras/schecter/schecter.png}"
         class="d-block mx-auto p-3" style="max-width: 50%;">
    <p>Schecter es una marca reconocida mundialmente por fabricar guitarras eléctricas de alta calidad, muy populares en el rock y el metal gracias a su potencia, diseño moderno y versatilidad.</p>
    <p>Fundada en 1976 en California como un taller especializado en piezas y repuestos para guitarras, Schecter comenzó fabricando pastillas, puentes y cuellos de gran calidad. A principios de los años 80 empezaron a producir guitarras completas que llamaron la atención por su sonido agresivo y acabados únicos. En los 90 y 2000, Schecter se consolidó como una marca clave dentro del metal y el hard rock, con modelos como la C-1, la Hellraiser y la Avenger, utilizadas por artistas de bandas como Avenged Sevenfold, Disturbed y Papa Roach. Hoy en día, Schecter combina innovación y tradición, ofreciendo guitarras tanto para principiantes como para músicos profesionales.</p>
</div>

<div class="container my-5">
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">

        <!-- Si hay productos -->
        <div th:if="${productos != null and !productos.isEmpty()}"
             th:each="producto : ${productos}" class="col">

            <div class="card h-100 shadow-sm">
                <img th:src="@{'/assets/img/catalogos/' + ${producto.imagenUrl}}"
                     class="card-img-top p-3"
                     th:alt="${producto.nombre}"
                     style="object-fit: contain; height: 250px;">

                <div class="card-body d-flex flex-column">
                    <h5 class="card-title" th:text="${producto.nombre}"></h5>

                    <!-- Botón descripción -->
                    <button class="btn btn-sm btn-outline-secondary mb-2"
                            type="button"
                            th:data-bs-target="'#desc' + ${producto.id}"
                            data-bs-toggle="collapse">
                        Mostrar Descripción
                    </button>

                    <div class="collapse mb-3" th:id="'desc' + ${producto.id}">
                        <p class="card-text text-muted small" th:text="${producto.descripcion}"></p>
                    </div>

                    <!-- Precio -->
                    <p class="card-text text-success fs-4 mt-auto">
                        $ <span th:text="${#numbers.formatDecimal(producto.precio, 0, 0)}"></span>
                    </p>

                </div>

                <!-- Botón añadir -->
                <div class="card-footer bg-white border-0 pt-0">
                    <form th:action="@{/Agregarcarrito}" method="post">
                        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                        <input type="hidden" name="productos_id" th:value="${producto.id}">

                        <button type="submit" class="btn btn-primary w-100">
                            Añadir al carrito
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Si NO hay productos -->
        <div th:if="${productos == null or productos.isEmpty()}" class="col-12">
            <div class="alert alert-info text-center">No hay guitarras Schecter disponibles.</div>
        </div>

    </div>
</div>

<footer class="bg-dark text-light mt-5 p-4">
    <div class="container">
        <p class="text-center mb-0">&copy; 2025 Soluciones Musicales</p>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
